<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Wizardlab: How it Works" href="Playbooks.html" /><link rel="prev" title="Devops" href="index.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Wizard Lab - Bill the Wizard&#39;s Homepage</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Bill the Wizard's Homepage</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Bill the Wizard's Homepage</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Art.html">Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Biography.html">Biography</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Devops</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Devops</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Wizard Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="Playbooks.html">Wizardlab: How it Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="Wizardlab-bind9.html">Wizardlab DNS Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Wizardlab-bind9.html#wizardlab-bind9">Wizardlab-bind9</a></li>
<li class="toctree-l2"><a class="reference internal" href="wizardlab-docs.html">Wizardlab-docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-thewizard.html">Ansible Roles and “The Wizard”</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docker.html">Docker and Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hypervisors.html">Hypervisors</a></li>
<li class="toctree-l2"><a class="reference internal" href="install_docker.html">Install Docker on Debian</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../linux/index.html">Linux</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Linux</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../linux/Chroot.html">Linux Recovery with Live USB and Chroot</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/devops/Wizardlab.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="wizard-lab">
<h1>Wizard Lab<a class="headerlink" href="#wizard-lab" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://www.github.com/ashemath/wizardlab">github.com/ashemath/wizardlab</a></p>
<p><em>This project is under development, and designed only
for training and testing purposes.</em>
Multi-Machine training environment Vagrantfile</p>
<section id="features">
<h2>Features:<a class="headerlink" href="#features" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Multi-Machine Vagrantfile, featuring Debian 12</p></li>
<li><p>Control: 2 CPU, 2GB ram, 20GB Virtual Disk</p></li>
<li><p>Service: 4 CPU, 4GB ram, 20GB Virtual Disk</p></li>
<li><p>Client: 2 CPU, 4 GB ram, 20GB VIrtual Disk, EFI Boot Client</p></li>
</ul>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Linux OS (Need to test on Windows)</p></li>
<li><p>Libvirt/KVM</p></li>
<li><p>Vagrant and the the vagrant-libvirt plugin if using libvirt.</p></li>
<li><p>Minimum 4 core system for good performance.</p></li>
<li><p>Tested on Debian, Ubuntu, and Fedora systems.</p></li>
<li><p>Up to 8GB of RAM (16GB system RAM recommended)</p></li>
<li><p>Minimum 30GB storage (Up to 60GB depending on usage).</p></li>
</ul>
</section>
<section id="networking">
<h2>Networking<a class="headerlink" href="#networking" title="Link to this heading">¶</a></h2>
<p>Depending on how your are using Virtualbox or Libvirt,
the Virtual NIC Vagrant uses to provision hosts may vary, but
this file sets up a secondary network adapter on each machine that
sits on the network 192.168.56.0/24</p>
<ul class="simple">
<li><p>Control: 192.168.56.2</p></li>
<li><p>Service: 192.168.56.3</p></li>
<li><p>Client: 192.168.56.10</p></li>
</ul>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">¶</a></h2>
<p>The project is designed to be a flexible place to setup a fresh environment and test out
ansible playbooks. Controller and Services both have full Debian Bookworm installs,
the Client machine is a PXE test machine, for debugging netboot.xyz menus.</p>
<section id="control">
<h3>Control<a class="headerlink" href="#control" title="Link to this heading">¶</a></h3>
<p>The Control host will have a ready to use installation of Ansible in a Python
virtual environment. Just <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">ssh</span> <span class="pre">control</span></code> to connect to the control VM,
and <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">ansible/bin/activate</span></code> to start using Ansible commands.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ansible all -i inventory -m ping
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">control</span> <span class="o">|</span> <span class="n">SUCCESS</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;ansible_facts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;discovered_interpreter_python&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/bin/python3&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;ping&quot;</span><span class="p">:</span> <span class="s2">&quot;pong&quot;</span>
<span class="p">}</span>
<span class="n">services</span> <span class="o">|</span> <span class="n">SUCCESS</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;ansible_facts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;discovered_interpreter_python&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/bin/python3&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;ping&quot;</span><span class="p">:</span> <span class="s2">&quot;pong&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="services">
<h3>Services<a class="headerlink" href="#services" title="Link to this heading">¶</a></h3>
<p>The services VM is a target for infrastructure configuration. Think of it as a blank slate
for you to test configuration against. Service knows about controller by its <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code></p>
<p>Playbooks targeting the services VM are found throughout the playbooks, and many of the
infrasture configurations are just variations on setting up the services VM.</p>
</section>
</section>
<section id="pxe">
<h2>PXE<a class="headerlink" href="#pxe" title="Link to this heading">¶</a></h2>
<p>The PXE make target gives you a simple to setup PXE boot server that allows you to try
out different unix-based operating systems.
TFTP, DHCP, and a configured self-hosted install of netboot.xyz.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vagrant ssh control
$ make keys
$ make pxe
</pre></div>
</div>
<p>Next, boot up the Client VM on your Host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">up</span> <span class="n">client</span>
</pre></div>
</div>
<p>The Client machine is configured to PXE boot, so it will hang on step where it tries to inject
the SSH key. It will be trying to PXE boot. Open up <code class="docutils literal notranslate"><span class="pre">virt-manager</span></code> and try out the netboot.xyz menus.</p>
<p>If you got the menu working, try setting up a beefier virtual machine from scratch on the ‘wizardlab’ virtual network.</p>
</section>
<section id="imaging">
<h2>Imaging<a class="headerlink" href="#imaging" title="Link to this heading">¶</a></h2>
<p>The imaging environment gives you a Debian PXE boot server with a Clonezilla Live PXE
environment added ontop of it. Place a customized initramfs into the
playbooks/roles/pxe/files/clonezilla/ directory if you want to go down the road of building
a customized clonezilla live.</p>
<p>The imaging role will setup NFS services between the UEFI PXE client and your <code class="docutils literal notranslate"><span class="pre">service</span></code>
VM, so you can transfer files that you generate with Clonezilla, utilizing the storage
space on your developer workstation.</p>
<p>NOTE: The NFS shared with Clonezilla is read-only because of the limitations for chained NFS.
If you would like to save disks, you can work out how to connect with RW using SSH to one of
the VM’s, or you can setup a static NFS share on your hypervisor machine for the ./clonezilla
directory. I usually use SSH because it’s easy to setup.</p>
<p>To setup the imaging environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vagrant ssh control
$ make keys
$ make imaging
</pre></div>
</div>
<p>Connect your reference VM to the “wizardlab0” network in your virt-manager settings, and do
a UEFI PXE boot. You can select <code class="docutils literal notranslate"><span class="pre">Clonezilla</span> <span class="pre">Live</span> <span class="pre">x86</span></code> from the GRUB menu, and save/restore
disk images to your heart’s content.</p>
<p>You could use this system to build a custom imaging pipeline, for example. I have deployed both
Linux and Windows using a similar system on production systems.</p>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h2>
<section id="setup-libvirt-kvm">
<h3>Setup libvirt\KVM<a class="headerlink" href="#setup-libvirt-kvm" title="Link to this heading">¶</a></h3>
<p>Look up the best practice for installing Libvirt/KVM. For example,
in Ubuntu, you might do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt install -y qemu-kvm virt-manager libvirt-daemon-system virtinst libvirt-clients bridge-utils
$ sudo systemctl enable --now libvirtd
</pre></div>
</div>
<p>On Fedora, the key command is something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo dnf group install --with-optional virtualization
$ sudo systemctl enable --now libvirtd
</pre></div>
</div>
<p>To check if kvm is loaded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lsmod | grep kvm
kvm_intel             458752  6
kvm                  1323008  1 kvm_intel
irqbypass              16384  21 kvm
</pre></div>
</div>
</section>
<section id="setup-vagrant">
<h3>Setup Vagrant<a class="headerlink" href="#setup-vagrant" title="Link to this heading">¶</a></h3>
<p>Follow the instructions for your Host OS on this page:
<a class="reference external" href="https://developer.hashicorp.com/vagrant/downloads">developer.hashicorp.com/vagrant/downloads</a></p>
<p>Install the vagrant-libvirtd plugin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vagrant plugin install vagrant-libvirt
</pre></div>
</div>
</section>
<section id="install-git-if-needed">
<h3>Install Git if needed:<a class="headerlink" href="#install-git-if-needed" title="Link to this heading">¶</a></h3>
</section>
<section id="clone-this-repo-with-git">
<h3>Clone this repo with GIT<a class="headerlink" href="#clone-this-repo-with-git" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/ashemath/wizardlab.git
$ cd wizardlab
</pre></div>
</div>
</section>
<section id="start-up-the-machine">
<h3>Start up the machine<a class="headerlink" href="#start-up-the-machine" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">vagrant</span> <span class="pre">up</span></code></p>
</section>
<section id="connect-to-control">
<h3>Connect to Control<a class="headerlink" href="#connect-to-control" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">vagrant</span> <span class="pre">ssh</span> <span class="pre">control</span></code></p>
</section>
<section id="generate-and-distribute-lab-ssh-keys-with-ansible">
<h3>Generate and Distribute Lab SSH Keys with Ansible<a class="headerlink" href="#generate-and-distribute-lab-ssh-keys-with-ansible" title="Link to this heading">¶</a></h3>
<p>Playbooks live inside /vagrant/playbooks, so they can stay synced up with your project
directory, yet stay separate from you virtual machine’s directory structure.</p>
<p>The included Makefile will help you execute an ansible playbook that distributes a fresh
SSH key to all the ‘lab’ hosts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make keys
</pre></div>
</div>
</section>
</section>
<section id="what-to-do-next">
<h2>What to do next?<a class="headerlink" href="#what-to-do-next" title="Link to this heading">¶</a></h2>
<p>This project sets you up with a sensible, yet beefy, baseline environment to start playing with
ansible.
After running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">keys</span></code>, you can execute this, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source ansible/bin/activate
(ansible)$ ansible all -i inventory -m ping
</pre></div>
</div>
<p>Since the <code class="docutils literal notranslate"><span class="pre">vagrant</span></code> user has password-free sudo access on the VMs, your playbooks should be able
to elevate privileges with the ‘become’ option, without entering a password. You should have name resolution working via entries in <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code>.</p>
</section>
<section id="what-s-next-for-this-project">
<h2>What’s next for this project<a class="headerlink" href="#what-s-next-for-this-project" title="Link to this heading">¶</a></h2>
<p>The plan is to flesh out the ‘Client’ and ‘Service’ roles to include configuration playbooks
for deploying and managing a variety of production-like services with Docker.</p>
<p>Building this project is both professional development and free entertainment for myself.
Using lightweight ansible notebooks, we an configure any number of things on top of this
type of environment.</p>
<p>The plan is to provide options in the Makefile to setup various system scenarios.
By using VM Snapshots, you can build a catalog of scenarios that you can reuse to practice
new strategies in System Administration with Ansible.</p>
<section id="client">
<h3>Client<a class="headerlink" href="#client" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Networked <code class="docutils literal notranslate"><span class="pre">/home/${USER}</span></code></p></li>
<li><p>Network shares for data-sets</p></li>
<li><p>Configure VPN Acccess</p></li>
</ul>
</section>
<section id="service">
<h3>Service<a class="headerlink" href="#service" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>NFS: Shared storage between “Service” and “Client”</p></li>
<li><p>DNS: Bind (Authoritative DNS) and Unbound (Recursive DNS Lookup)</p></li>
<li><p>LDAP: Identity Management with FreeIPA</p></li>
<li><p>VPN: Access your ‘client’ or ‘control’ host through a OpenVPN server</p></li>
<li><p>Monitoring: ELK stack for exploring Syslog and Grafana Dashboards.</p></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="Playbooks.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Wizardlab: How it Works</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Devops</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Bill Ashe
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Wizard Lab</a><ul>
<li><a class="reference internal" href="#features">Features:</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#networking">Networking</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a><ul>
<li><a class="reference internal" href="#control">Control</a></li>
<li><a class="reference internal" href="#services">Services</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pxe">PXE</a></li>
<li><a class="reference internal" href="#imaging">Imaging</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#setup-libvirt-kvm">Setup libvirt\KVM</a></li>
<li><a class="reference internal" href="#setup-vagrant">Setup Vagrant</a></li>
<li><a class="reference internal" href="#install-git-if-needed">Install Git if needed:</a></li>
<li><a class="reference internal" href="#clone-this-repo-with-git">Clone this repo with GIT</a></li>
<li><a class="reference internal" href="#start-up-the-machine">Start up the machine</a></li>
<li><a class="reference internal" href="#connect-to-control">Connect to Control</a></li>
<li><a class="reference internal" href="#generate-and-distribute-lab-ssh-keys-with-ansible">Generate and Distribute Lab SSH Keys with Ansible</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-to-do-next">What to do next?</a></li>
<li><a class="reference internal" href="#what-s-next-for-this-project">What’s next for this project</a><ul>
<li><a class="reference internal" href="#client">Client</a></li>
<li><a class="reference internal" href="#service">Service</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=a4664895"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    </body>
</html>